const util={diffDate:(e,t=!1)=>{const n=new Date,o=new Date(e),i=n.getTime()-o.getTime(),c=36e5,a=24*c;let s;if(t){const e=i/a,t=i/c,n=i/6e4;s=e>14?null:e>=1?parseInt(e)+" "+ctx.date_suffix.day:t>=1?parseInt(t)+" "+ctx.date_suffix.hour:n>=1?parseInt(n)+" "+ctx.date_suffix.min:ctx.date_suffix.just}else s=parseInt(i/a);return s},copy:(e,t)=>{const n=document.getElementById(e);n&&(n.select(),document.execCommand("Copy"),t&&t.length>0&&hud.toast(t,2500))},toggle:e=>{const t=document.getElementById(e);t&&t.classList.toggle("display")},scrollTop:()=>{window.scrollTo({top:0,behavior:"smooth"})},scrollComment:()=>{document.getElementById("comments").scrollIntoView({behavior:"smooth"})},viewportLazyload:(e,t,n=!0)=>{if(!n||!("IntersectionObserver"in window))return void t();const o=new IntersectionObserver(e=>{e[0].intersectionRatio>0&&(t(),o.disconnect())});o.observe(e)}},hud={toast:(e,t)=>{const n=Number(isNaN(t)?2e3:t);var o=document.createElement("div");o.classList.add("toast"),o.classList.add("show"),o.innerHTML=e,document.body.appendChild(o),setTimeout(function(){document.body.removeChild(o)},n)}},l_body=document.querySelector(".l_body"),init={toc:()=>{utils.jq(()=>{var e=[];$("article.md-text :header").each(function(t,n){e.push(n)});var t=null;window.addEventListener("scroll",function(){!function(){var t=$(this).scrollTop(),n=null;for(var o in e){var i=$(e[o]);i.offset().top>t+32||(n?i.offset().top>=n.offset().top&&(n=i):n=i)}if(n){$("#data-toc a.toc-link").removeClass("active");var c="#"+n.attr("id");if("#undefined"!=c){const e=$('#data-toc a.toc-link[href="'+encodeURI(c)+'"]');e.length>0&&e.addClass("active")}else $("#data-toc a.toc-link:first").addClass("active")}}(),null!==t&&clearTimeout(t),t=setTimeout(function(){!function(){const e=document.querySelector("#data-toc .toc"),t=document.querySelector("#data-toc .toc a.toc-link.active");if(null==e||null==t)return;const n=t.getBoundingClientRect().bottom-e.getBoundingClientRect().bottom+100,o=t.getBoundingClientRect().top-e.getBoundingClientRect().top-64;o<0?e.scrollBy({top:o,behavior:"smooth"}):n>0&&e.scrollBy({top:n,behavior:"smooth"})}()}.bind(this),50)})})},sidebar:()=>{utils.jq(()=>{$("#data-toc a.toc-link").click(function(e){sidebar.dismiss()})})},relativeDate:e=>{e.forEach(e=>{const t=e,n=t.getAttribute("datetime");let o=util.diffDate(n,!0);o&&(t.innerText=o)})},registerTabsTag:function(){document.querySelectorAll(".tabs .nav-tabs .tab").forEach(e=>{e.addEventListener("click",t=>{if(t.preventDefault(),e.classList.contains("active"))return;[...e.parentNode.children].forEach(t=>{t.classList.toggle("active",t===e)});const n=document.getElementById(e.querySelector("a").getAttribute("href").replace("#",""));[...n.parentNode.children].forEach(e=>{e.classList.toggle("active",e===n)}),n.dispatchEvent(new Event("tabs:click",{bubbles:!0}))})}),window.dispatchEvent(new Event("tabs:register"))},canonicalCheck:()=>{const e=window.canonical;function t(t=!1){const n=document.createElement("meta");n.name="robots",n.content="noindex, nofollow",document.head.appendChild(n);const o=document.createElement("div"),i=`https://${e.originalHost}`;t?(o.className="canonical-tip official",o.innerHTML=`\n        <a href="${i}" target="_self" rel="noopener noreferrer">\n        本站为官方备用站，仅供应急。主站：${i}\n        </a>\n        `):(o.className="canonical-tip unofficial",o.innerHTML=`\n        <a href="${i}" target="_self" rel="noopener noreferrer">\n        <div class="headline icon">☠️</div>\n        本站为非法克隆站，请前往官方源站访问。<br>\n        源站：${i}\n        </a>\n        `),document.body.appendChild(o)}if(!e.originalHost)return;const n=new URL(window.location.href).hostname.replace(/^www\./,"");if("localhost"==n)return;const o=window.btoa(n),i=e.encoded===o,c=document.querySelector('link[rel="canonical"]');if(!c){if(i)return;return e.officialHosts?.includes(n)?void t(!0):void t(!1)}const a=new URL(c.href).hostname.replace(/^www\./,""),s=window.btoa(a);e.encoded===s&&i||t(e.officialHosts?.includes(n))}};init.toc(),init.sidebar(),init.relativeDate(document.querySelectorAll("#post-meta time")),init.registerTabsTag(),init.canonicalCheck();