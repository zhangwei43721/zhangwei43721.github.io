utils.jq(()=>{$(function(){const s=document.getElementsByClassName("ds-sites");for(var a=0;a<s.length;a++){const e=s[a],t=e.dataset.api;if(null==t)continue;const r=def.avatar,l=def.cover;utils.request(e,t,async s=>{const a=await s.json();for(let s of a.content){var t='<div class="grid-cell site-card">';t+=`<a class="card-link" target="_blank" rel="external nofollow noopener noreferrer" href="${s.url}">`,t+=`<img src="${s.cover||s.snapshot||s.screenshot}" onerror="javascript:this.removeAttribute('data-src');this.src='${l}';"/>`,t+='<div class="info">',t+=`<img src="${s.icon||s.avatar||r}" onerror="javascript:this.removeAttribute('data-src');this.src='${r}';"/>`,t+=`<span class="title">${s.title}</span>`,t+=`<span class="desc">${s.description||s.url}</span>`,t+="</div>",t+='<div class="labels">';for(let a of s.labels)a.lightness>75?t+=`<div class="label" style="background:#${a.color};color:hsla(${a.hue}, ${a.saturation}%, 20%, 1);">${a.name}</div>`:a.saturation>90&&a.lightness>40?t+=`<div class="label" style="background:#${a.color};color:hsla(${a.hue}, 50%, 20%, 1);">${a.name}</div>`:t+=`<div class="label" style="background:#${a.color};color:white">${a.name}</div>`;t+="</div>",t+="</a>",t+="</div>",$(e).find(".grid-box").append(t)}window.wrapLazyloadImages(e)})}})});