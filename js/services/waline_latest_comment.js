utils.jq(()=>{$(function(){const e=document.getElementsByClassName("ds-waline");for(var a=0;a<e.length;a++){const t=e[a],n=parseInt(t.getAttribute("limit"))||10,s=t.dataset.api;if(null==s)continue;const r=s+"/comment?type=recent&count="+n,i=def.avatar;utils.request(t,r,async e=>{(await e.json()).forEach((e,a)=>{var n='<div class="timenode" index="'+a+'">';n+='<div class="header">',n+='<div class="user-info">',n+='<img src="'+(e.avatar||i)+'" onerror="javascript:this.src=\''+i+"';\">",n+="<span>"+e.nick+"</span>",n+="</div>",n+="<span>"+new Date(e.time).toLocaleString()+"</span>",n+="</div>",n+='<a class="body" href="'+e.url+"#"+e.objectId+'" target="_blank" rel="external nofollow noopener noreferrer">',n+=e.comment.replace(/<a\b[^>]*>(.*?)<\/a>/g,"$1"),n+="</a>",n+="</div>",$(t).append(n)})})}})});